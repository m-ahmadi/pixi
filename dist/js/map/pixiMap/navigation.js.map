{"version":3,"sources":["../../../../src/js/map/pixiMap/navigation.js"],"names":["define","wpix","newPubSub","u","inst","extend","p","init","nav","panel","rect","dot","PIXI","Graphics","panelWidth","panelHeight","panelOffset","interactive","beginFill","lineStyle","drawRect","endFill","rectWidth","renderer","width","rectHeight","height","buttonMode","alpha","TPL_nav","dotWH","dotHalf","dotPos","x","y","position","set","Container","navPos","Point","addChild","addDragDrop","el","name","on","rectDown","rectUp","rectMove","dotDown","dotUp","dotMove","addCustomPos","left","right","top","bott","panelDown","e","panelUp","panelMove","data","dragging","dragPoint","getLocalPosition","parent","mouseIsDown","defaultCursor","newPosition","newX","newY","dotNewX","dotNewY","min","maxX","maxY","rectNewPos","dotNewPos","publish","currentCursor","resizeX","resizeY","halfX","halfY","nextRight","nextLeft","nextBott","nextTop","reachedRight","reachedLeft","reachedBott","reachedTop"],"mappings":"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","file":"navigation.js","sourcesContent":["define(['./wpix', 'core/pubsub', 'core/util'], function (wpix, newPubSub, u) {\r\n\t\r\n\tvar inst = u.extend( newPubSub() ),\r\n\t\tp = {};\r\n\t\r\n\tfunction init() {\r\n\t\tvar nav,\r\n\t\t\tpanel,\r\n\t\t\trect,\r\n\t\t\tdot;\r\n\t\t\r\n\t\tp.panel = new PIXI.Graphics();\r\n\t\tp.panelWidth = 400;\r\n\t\tp.panelHeight = 200;\r\n\t\tp.panelOffset = 100;\r\n\t\tpanel = p.panel;\r\n\t\tpanel.interactive = true;\r\n\t\tpanel.beginFill(0xE3E3E3);\r\n\t\tpanel.lineStyle(0);\r\n\t\tpanel.drawRect(0, 0, p.panelWidth, p.panelHeight);\r\n\t\tpanel.endFill();\r\n\t\t//panel.position.set( panelPos.x, panelPos.y ); \r\n\t\t\r\n\t\tp.rect = new PIXI.Graphics();\r\n\t\tp.rectWidth = wpix.renderer.width / 10;\r\n\t\tp.rectHeight = wpix.renderer.height / 3;\r\n\t\trect = p.rect;\r\n\t\trect.interactive = true;\r\n\t\trect.buttonMode = true;\r\n\t\trect.beginFill(0x2196F3, 1);\r\n\t\trect.lineStyle(0);\r\n\t\trect.drawRect(0, 0, 150, 150);\r\n\t\trect.endFill();\r\n\t\trect.alpha = 0.5;\r\n\t\trect.TPL_nav = \"box\";\r\n\r\n\t\tp.dot = new PIXI.Graphics();\r\n\t\tp.dotWH = 6;\r\n\t\tp.dotHalf = p.dotWH / 2;\r\n\t\tp.dotPos = {\r\n\t\t\tget x() { return (rect.x + rect.width) - p.dotHalf; },\r\n\t\t\tget y() { return (rect.y + rect.height) - p.dotHalf; }\r\n\t\t};\r\n\t\tdot = p.dot;\r\n\t\tdot.interactive = true;\r\n\t\tdot.buttonMode = true;\r\n\t\tdot.beginFill(0x0000FF, 1);\r\n\t\tdot.lineStyle(0);\r\n\t\tdot.drawRect(0, 0, p.dotWH, p.dotWH);\r\n\t\tdot.endFill();\r\n\t\tdot.position.set( p.dotPos.x, p.dotPos.y );\r\n\t\tdot.TPL_nav = \"dot\";\r\n\t\t\r\n\t\tp.nav = new PIXI.Container();\r\n\t\tp.navPos = new PIXI.Point(\r\n\t\t\twpix.renderer.width - (p.panelWidth + p.panelOffset),\r\n\t\t\t50\r\n\t\t);\r\n\t\tnav = p.nav;\r\n\t\tnav.position.set( p.navPos.x, p.navPos.y );\r\n\t\tnav.addChild(panel);\r\n\t\tnav.addChild(rect);\r\n\t\tnav.addChild(dot);\r\n\t\taddDragDrop(panel, \"panel\");\r\n\t\taddDragDrop(rect, \"rect\");\r\n\t\taddDragDrop(dot, \"dot\");\r\n\t\twpix.addChild(\"stage\", nav);\r\n\t}\r\n\tfunction addDragDrop(el, name) {\r\n\t\tif (name === \"rect\") {\r\n\t\t\tel\r\n\t\t\t\t.on(\"mousedown\", rectDown)\r\n\t\t\t\t.on(\"touchstart\", rectDown)\r\n\t\t\t\t.on(\"mouseup\", rectUp)\r\n\t\t\t\t.on(\"mouseupoutside\", rectUp)\r\n\t\t\t\t.on(\"touchend\", rectUp)\r\n\t\t\t\t.on(\"touchendoutside\", rectUp)\r\n\t\t\t\t.on(\"mousemove\", rectMove)\r\n\t\t\t\t.on(\"touchmove\", rectMove);\r\n\t\t} else if ( name === \"dot\" ) {\r\n\t\t\tel\r\n\t\t\t\t.on(\"mousedown\", dotDown)\r\n\t\t\t\t.on(\"touchstart\", dotDown)\r\n\t\t\t\t.on(\"mouseup\", dotUp)\r\n\t\t\t\t.on(\"mouseupoutside\", dotUp)\r\n\t\t\t\t.on(\"touchend\", dotUp)\r\n\t\t\t\t.on(\"touchendoutside\", dotUp)\r\n\t\t\t\t.on(\"mousemove\", dotMove)\r\n\t\t\t\t.on(\"touchmove\", dotMove);\r\n\t\t}\r\n\t}\r\n\tfunction addCustomPos(el) {\r\n\t\tel.left = el.position.x;\r\n\t\tel.right = el.position.x + el.width;\r\n\t\tel.top = el.position.y;\r\n\t\tel.bott = el.position.y + el.height;\r\n\t}\r\n\tfunction panelDown(e) {\r\n\t\t//e.stopPropagation();\r\n\t\t\r\n\t}\r\n\tfunction panelUp() {\r\n\t\t\r\n\t}\r\n\tfunction panelMove() {\r\n\t\t\r\n\t}\r\n\tfunction rectDown(e) {\r\n\t\tthis.data = e.data;\r\n\t\tthis.dragging = true;\r\n\t\tthis.dragPoint = e.data.getLocalPosition(this.parent);\r\n\t\tthis.dragPoint.x -= this.position.x;\r\n\t\tthis.dragPoint.y -= this.position.y;\r\n\t}\r\n\tfunction dotDown() {\r\n\t\tthis.mouseIsDown = true;\r\n\t}\r\n\tfunction rectUp() {\r\n\t\tthis.dragging = false;\r\n\t\tthis.data = null;\r\n\t}\r\n\tfunction dotUp() {\r\n\t\tthis.mouseIsDown = false;\r\n\t}\r\n\tfunction rectMove() {\r\n\t\tthis.defaultCursor = \"move\";\r\n\t\tif (this.dragging) {\r\n\t\t\tvar panel = p.panel,\r\n\t\t\t\trect = p.rect,\r\n\t\t\t\tdot = p.dot,\r\n\t\t\t\tdotPos = p.dotPos,\r\n\t\t\t\tdotHalf = p.dotHalf,\r\n\t\t\t\tnewPosition = this.data.getLocalPosition(this.parent),\r\n\t\t\t\tnewX = newPosition.x - this.dragPoint.x,\r\n\t\t\t\tnewY = newPosition.y - this.dragPoint.y,\r\n\t\t\t\tdotNewX = newX + (rect.width - dotHalf),\r\n\t\t\t\tdotNewY = newY + (rect.height - dotHalf);\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\tvar min = 0,\r\n\t\t\t\tmaxX = panel.width - rect.width,\r\n\t\t\t\tmaxY = panel.height - rect.height,\r\n\t\t\t\trectNewPos = new PIXI.Point(),\r\n\t\t\t\tdotNewPos = new PIXI.Point();\r\n\t\t\t\r\n\t\t\tif ( newX > min  &&  newX <= maxX ) {\r\n\t\t\t\trectNewPos.x = newX\r\n\t\t\t} else if ( newX < min ) {\r\n\t\t\t\trectNewPos.x = min;\r\n\t\t\t} else if ( newX > maxX ) {\r\n\t\t\t\trectNewPos.x = maxX;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( newY > min  &&  newY <= maxY ) {\r\n\t\t\t\trectNewPos.y = newY;\r\n\t\t\t} else if ( newY < min ) {\r\n\t\t\t\trectNewPos.y = min;\r\n\t\t\t} else if ( newY > maxY ) {\r\n\t\t\t\trectNewPos.y = maxY;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdotNewPos.x = ( newX > min  &&  newX <= maxX ) ? dotNewX : dotPos.x;\r\n\t\t\tdotNewPos.y = ( newY > min  &&  newY <= maxY ) ? dotNewY : dotPos.y;\r\n\t\t\t\r\n\t\t\trect.position.x = rectNewPos.x;\r\n\t\t\trect.position.y = rectNewPos.y;\r\n\t\t\tdot.position.x = dotNewPos.x;\r\n\t\t\tdot.position.y = dotNewPos.y;\r\n\t\t\t\r\n\t\t\tinst.publish(\"pan\");\r\n\t\t}\r\n\t}\r\n\tfunction dotMove(e) {\r\n\t\tthis.defaultCursor = \"nwse-resize\";\r\n\t\tif (this.mouseIsDown) {\r\n\t\t\tvar currentCursor = e.data.getLocalPosition(this.parent),\r\n\t\t\t\tresizeX = ( currentCursor.x - this.x ),\r\n\t\t\t\tresizeY = ( currentCursor.y - this.y ),\r\n\t\t\t\thalfX = resizeX / 2,\r\n\t\t\t\thalfY = resizeY / 2,\r\n\t\t\t\tpanel = p.panel,\r\n\t\t\t\trect = p.rect,\r\n\t\t\t\tdot = p.dot;\r\n\t\t\t\t\r\n\t\t\trect.defaultCursor = \"nwse-resize\";\r\n\t\t\taddCustomPos(rect);\r\n\t\t\taddCustomPos(panel);\r\n\t\t\tvar\tmin = 0,\r\n\t\t\t\tnextRight = rect.width + resizeX,\r\n\t\t\t\tnextLeft = rect.position.x - halfX,\r\n\t\t\t\tnextBott = rect.height + resizeX,\r\n\t\t\t\tnextTop = rect.position.y - halfX,\r\n\t\t\t\treachedRight = !(nextRight <= panel.right),\r\n\t\t\t\treachedLeft = !(nextLeft > min),\r\n\t\t\t\treachedBott = !(nextBott <= panel.bott),\r\n\t\t\t\treachedTop = !(nextTop > min);\r\n\t\t\t\r\n\t\t\tif ( !reachedRight  &&  !reachedLeft ) {\r\n\t\t\t\trect.width += resizeX;\r\n\t\t\t\trect.position.x -= halfX;\r\n\t\t\t\tdot.position.x += halfX;\r\n\t\t\t} else if ( !reachedRight  &&  reachedLeft ) {\r\n\t\t\t\trect.width += resizeX;\r\n\t\t\t\tdot.position.x += resizeX;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ( !reachedBott  &&  !reachedTop ) {\r\n\t\t\t\trect.height += resizeX;\r\n\t\t\t\trect.position.y -= halfX;\r\n\t\t\t\tdot.position.y += halfX;\r\n\t\t\t} else if ( !reachedBott  &&  reachedTop ) {\r\n\t\t\t\trect.height += resizeX;\r\n\t\t\t\tdot.position.y += resizeX;\r\n\t\t\t}\r\n\t\t\tinst.publish(\"zoom\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tinst.init = init;\r\n\treturn inst;\r\n\r\n});"]}