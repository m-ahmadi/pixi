{"version":3,"sources":["../../src/discovery/mediator.js"],"names":["define","map","wuk","newPubSub","u","inst","extend","DISCOVERY","SNMP_CREDS","SNMP_TIMES","d","DEFAULT_START_IP","DEFAULT_END_IP","DEFAULT_IP","DEFAULT_SUBNET","DEFAULT_DISCOVERY_TIMEOUT","DEFAULT_SNMP_TIMEOUT","DEFAULT_SNMP_RETRIES","MIN_DISCOVERY_TIMEOUT","MAX_DISCOVERY_TIMEOUT","MIN_SNMP_TIMEOUT","MAX_SNMP_TIMEOUT","MIN_SNMP_RETRIES","MAX_SNMP_RETRIES","els1","els2","els3","toSend","resetData","getEls","root","obj","o","$","each","i","domEl","jEl","data","k","action","rangeType","startRange","endRange","ip","subnet","snmpCredentials","discoveryTimeout","snmpTimeout","snmpRetries","closeModal","begin","openModal","reset","closeSidebar","sb","is","toggle","isValidIp","v","rgx","ip1","test","doValidation","inputEl","el","val","res","startBtn","next","removeClass","addClass","enable","disable","discover","radio1","prop","input1","input2","table","find","slice","remove","slider1","noUiSlider","set","slider2","slider3","initSliders","create","start","connect","range","min","max","on","a","b","c","toFixed","input3","init","attr","radios","parseInt","value","first","second","type","trim","filter","focus","addnew","temp","Handlebars","templates","credrow","append","text","parent","prev","j","push","submit","get","emit","window","discovery"],"mappings":"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","file":"mediator.js","sourcesContent":["define([\"map/mediator\", \"core/wuk\", \"core/pubsub\", \"core/util\"], function (map, wuk, newPubSub, u) {\r\n\tlet inst = u.extend( newPubSub() );\r\n\t\r\n\tconst DISCOVERY = \"#modal_discovery\";\r\n\tconst SNMP_CREDS = \"#modal_snmpcreds\";\r\n\tconst SNMP_TIMES = \"#modal_snmptimes\";\r\n\tconst d = {\r\n\t\tDEFAULT_START_IP: \"192.168.1.1\",\r\n\t\tDEFAULT_END_IP: \"192.168.1.255\",\r\n\t\tDEFAULT_IP:  \"192.168.1.1\",\r\n\t\tDEFAULT_SUBNET: \"255.255.255.0\",\r\n\t\tDEFAULT_DISCOVERY_TIMEOUT: 180,\r\n\t\tDEFAULT_SNMP_TIMEOUT: 5,\r\n\t\tDEFAULT_SNMP_RETRIES: 3,\r\n\t\tMIN_DISCOVERY_TIMEOUT: 10,\r\n\t\tMAX_DISCOVERY_TIMEOUT: 600,\r\n\t\tMIN_SNMP_TIMEOUT: 1,\r\n\t\tMAX_SNMP_TIMEOUT: 10,\r\n\t\tMIN_SNMP_RETRIES: 1,\r\n\t\tMAX_SNMP_RETRIES: 10\r\n\t};\r\n\t\r\n\tlet els1, els2, els3;\r\n\tlet toSend;\r\n\t\r\n\tresetData();\r\n\tfunction getEls(root, obj) {\r\n\t\tlet o = {};\r\n\t\t$(`${root} [data-el]`).each((i, domEl) => {\r\n\t\t\tlet jEl = $(domEl);\r\n\t\t\to[ jEl.data(\"el\") ] = jEl; \r\n\t\t});\r\n\t\t$(`${root} [data-els]`).each((i, domEl) => {\r\n\t\t\tlet jEl = $(domEl);\r\n\t\t\tlet k = jEl.data(\"els\");\r\n\t\t\tif (!o[k]) {\r\n\t\t\t\to[k] = $(`${root} [data-els=\"${k}\"]`);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (obj) {\r\n\t\t\tobj = o;\r\n\t\t} else {\r\n\t\t\treturn o;\r\n\t\t}\r\n\t}\r\n\tfunction resetData() {\r\n\t\ttoSend = {\r\n\t\t\taction: \"discovery\",\r\n\t\t\trangeType: 0,\r\n\t\t\tstartRange: d.DEFAULT_START_IP,\r\n\t\t\tendRange: d.DEFAULT_END_IP,\r\n\t\t\tip: \"\",\r\n\t\t\tsubnet: \"\",\r\n\t\t\tsnmpCredentials: [],\r\n\t\t\tdiscoveryTimeout: d.DEFAULT_DISCOVERY_TIMEOUT,\r\n\t\t\tsnmpTimeout: d.DEFAULT_SNMP_TIMEOUT,\r\n\t\t\tsnmpRetries: d.DEFAULT_SNMP_RETRIES\r\n\t\t};\r\n\t}\r\n\tfunction closeModal() {\r\n\t\twuk.closeModal(DISCOVERY);\r\n\t}\r\n\tfunction begin() {\r\n\t\twuk.openModal(DISCOVERY);\r\n\t\treset();\r\n\t}\r\n\tfunction closeSidebar() {\r\n\t\tlet sb = $(\"#newSide\")\r\n\t\tif ( sb.is(\":visible\") ) {\r\n\t\t\tsb.toggle(\"slide\");\r\n\t\t}\r\n\t}\r\n\tfunction isValidIp(v) {\r\n\t\tvar rgx = {\r\n\t\t\tip: /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/, // regex cookbook\r\n\t\t\tip1: /^(([1-9]?\\d|1\\d\\d|2[0-5][0-5]|2[0-4]\\d)\\.){3}([1-9]?\\d|1\\d\\d|2[0-5][0-5]|2[0-4]\\d)$/         // stackoverflow\r\n\t\t};\r\n\t\t\r\n\t\treturn rgx.ip.test(v);\r\n\t}\r\n\tfunction doValidation(inputEl) {\r\n\t\tlet el = inputEl;\r\n\t\tlet val = el.val();\r\n\t\tlet res = false;\r\n\t\tlet startBtn = els1.next;\r\n\t\t\r\n\t\tres = isValidIp(val);\r\n\t\t\r\n\t\tinputEl.removeClass(\"uk-form-success uk-form-danger\");\r\n\t\tif (res) {\r\n\t\t\tel.addClass(\"uk-form-success\");\r\n\t\t\twuk.enable( startBtn );\r\n\t\t} else {\r\n\t\t\tel.addClass(\"uk-form-danger\");\r\n\t\t\twuk.disable( startBtn );\r\n\t\t}\r\n\t}\r\n\tfunction discover() {\r\n\t\t// discover( first, second, parseInt(type, 10) );\r\n\t}\r\n\t\r\n\tfunction reset() {\r\n\t\tresetData();\r\n\t\tels1.radio1.prop(\"checked\", true);\r\n\t\tels1.input1.val( d.DEFAULT_START_IP );\r\n\t\tels1.input2.val( d.DEFAULT_END_IP );\r\n\t\tels2.table.find(\"tr\").slice(2).remove();\r\n\t\tels3.slider1[0].noUiSlider.set( d.DEFAULT_DISCOVERY_TIMEOUT );\r\n\t\tels3.slider2[0].noUiSlider.set( d.DEFAULT_SNMP_TIMEOUT );\r\n\t\tels3.slider3[0].noUiSlider.set( d.DEFAULT_SNMP_RETRIES );\r\n\t}\r\n\tfunction initSliders() {\r\n\t\tnoUiSlider.create(els3.slider1[0], {\r\n\t\t\tstart: d.DEFAULT_DISCOVERY_TIMEOUT,\r\n\t\t\tconnect: [true, false],\r\n\t\t\trange: {\r\n\t\t\t\tmin: d.MIN_DISCOVERY_TIMEOUT,\r\n\t\t\t\tmax: d.MAX_DISCOVERY_TIMEOUT\r\n\t\t\t}\r\n\t\t});\r\n\t\tnoUiSlider.create(els3.slider2[0], {\r\n\t\t\tstart: d.DEFAULT_SNMP_TIMEOUT,\r\n\t\t\tconnect: [true, false],\r\n\t\t\trange: {\r\n\t\t\t\tmin: d.MIN_SNMP_TIMEOUT,\r\n\t\t\t\tmax: d.MAX_SNMP_TIMEOUT\r\n\t\t\t}\r\n\t\t});\r\n\t\tnoUiSlider.create(els3.slider3[0], {\r\n\t\t\tstart: d.DEFAULT_SNMP_RETRIES,\r\n\t\t\tconnect: [true, false],\r\n\t\t\trange: {\r\n\t\t\t\tmin: d.MIN_SNMP_RETRIES,\r\n\t\t\t\tmax: d.MAX_SNMP_RETRIES\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tels3.slider1[0].noUiSlider.on(\"update\", function (a, b, c) {\r\n\t\t\tels3.input1.val( c[0].toFixed() );\r\n\t\t});\r\n\t\tels3.slider2[0].noUiSlider.on(\"update\", function (a, b, c) {\r\n\t\t\tels3.input2.val( c[0].toFixed() );\r\n\t\t});\r\n\t\tels3.slider3[0].noUiSlider.on(\"update\", function (a, b, c) {\r\n\t\t\tels3.input3.val( c[0].toFixed() );\r\n\t\t});\r\n\t}\r\n\tfunction init() {\r\n\t\tels1 = getEls(DISCOVERY);\r\n\t\tels2 = getEls(SNMP_CREDS);\r\n\t\tels3 = getEls(SNMP_TIMES);\r\n\t\t\r\n\t\tels1.radio1.prop(\"checked\", true);\r\n\t\tels1.input1.attr(\"value\", d.DEFAULT_START_IP);\r\n\t\tels1.input2.attr(\"value\", d.DEFAULT_END_IP);\r\n\t\tdoValidation(els1.input1);\r\n\t\tdoValidation(els1.input2);\r\n\t\t\r\n\t\tels1.radios.on(\"click\", function () {\r\n\t\t\tlet rangeType = parseInt(this.value, 10),\r\n\t\t\t\tfirst, second;\r\n\t\t\t\t\r\n\t\t\tfirst = els1.input1;\r\n\t\t\tsecond = els1.input2;\r\n\t\t\t\r\n\t\t\tif (rangeType === 0) {\r\n\t\t\t\tfirst.val( d.DEFAULT_START_IP );\r\n\t\t\t\tsecond.val( d.DEFAULT_END_IP );\r\n\t\t\t} else {\r\n\t\t\t\tfirst.val( d.DEFAULT_IP );\r\n\t\t\t\tsecond.val( d.DEFAULT_SUBNET );\r\n\t\t\t}\r\n\t\t\tdoValidation( els1.input1 );\r\n\t\t\tdoValidation( els1.input2 );\r\n\t\t});\r\n\t\tels1.input1.on(\"keyup\", function () {\r\n\t\t\tdoValidation( $(this) );\r\n\t\t});\r\n\t\tels1.input2.on(\"keyup\", function () {\r\n\t\t\tdoValidation( $(this) );\r\n\t\t});\r\n\t\tels1.next.on(\"click\", function () {\r\n\t\t\tlet first, second, type;\r\n\t\t\t\r\n\t\t\tfirst = els1.input1.val();\r\n\t\t\tsecond = els1.input2.val();\r\n\t\t\t\r\n\t\t\tfirst = first ? first.trim() : \"\";\r\n\t\t\tsecond = second ? second.trim() : \"\";\r\n\t\t\t\r\n\t\t\ttype = els1.radios.filter(\":checked\").val();\r\n\t\t\ttype = parseInt(type, 10);\r\n\t\t\t\r\n\t\t\ttoSend.rangeType  = type;\r\n\t\t\ttoSend.startRange = type === 0 ? first  : \"\";\r\n\t\t\ttoSend.endRange   = type === 0 ? second : \"\";\r\n\t\t\ttoSend.ip         = type === 1 ? first  : \"\";\r\n\t\t\ttoSend.subnet     = type === 1 ? second : \"\";\r\n\t\t\t\r\n\t\t\twuk.openModal(SNMP_CREDS);\r\n\t\t\tels2.table.find(\"[data-input]:last\").focus();\r\n\t\t});\r\n\t\tels2.addnew.on(\"click\", function () {\r\n\t\t\tlet temp = Handlebars.templates.credrow;\r\n\t\t\tels2.table.append( temp({text:\"\"}) );\r\n\t\t\tels2.table.find(\"[data-input]\").focus();\r\n\t\t});\r\n\t\tels2.table.on(\"click\", \"button[data-delete]\", function () {\r\n\t\t\tlet el = $(this);\r\n\t\t\tel.parent().parent().remove();\r\n\t\t\tels2.table.find(\"[data-input]:last\").focus();\r\n\t\t});\r\n\t\tels2.prev.on(\"click\", function () {\r\n\t\t\ttoSend.snmpCredentials = [];\r\n\t\t\twuk.openModal(DISCOVERY);\r\n\t\t});\r\n\t\tels2.next.on(\"click\", function () {\r\n\t\t\ttoSend.snmpCredentials = [];\r\n\t\t\tels2.table.find(\"[data-input]\").each((i, j) => {\r\n\t\t\t\ttoSend.snmpCredentials.push( $(j).val() );\r\n\t\t\t});\r\n\t\t\twuk.openModal(SNMP_TIMES);\r\n\t\t});\r\n\t\tels3.prev.on(\"click\", function () {\r\n\t\t\twuk.openModal(SNMP_CREDS);\r\n\t\t});\r\n\t\tels3.submit.on(\"click\", function () {\r\n\t\t\ttoSend.discoveryTimeout = parseInt( els3.slider1[0].noUiSlider.get(), 10 ).toFixed();\r\n\t\t\ttoSend.snmpTimeout      = parseInt( els3.slider2[0].noUiSlider.get(), 10 ).toFixed();\r\n\t\t\ttoSend.snmpRetries      = parseInt( els3.slider3[0].noUiSlider.get(), 10 ).toFixed();\r\n\t\t\t\r\n\t\t\tinst.emit(\"submit\", toSend);\r\n\t\t\twuk.closeModal(SNMP_TIMES);\r\n\t\t\treset();\r\n\t\t});\r\n\t\t\r\n\t\tinitSliders();\r\n\t}\r\n\t\r\n\tinst.isValidIp = isValidIp;\r\n\tinst.begin = begin;\r\n\tinst.init = init;\r\n\t\r\n\twindow.discovery = inst;\r\n\treturn inst;\r\n});"]}