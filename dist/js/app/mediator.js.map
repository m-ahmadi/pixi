{"version":3,"sources":["../../../src/js/app/mediator.js"],"names":["define","mainSocket","wuk","map","sidebar","header","traceroute","discovery","inst","addCustomEvts","on","toggle","begin","toSend","send","JSON","stringify","e","data","parse","DEBUG","console","log","draw","beforeReady","init","onReady"],"mappings":"AAAAA,OAAO;AACP;AACC,cAFM,EAGN,UAHM,EAIN,cAJM,EAKN,WALM,EAMN,UANM,EAON,cAPM,EAQN,sBARM,EASN,aATM,CAAP,EAUG,UAAUC,UAAV,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,OAAhC,EAAyCC,MAAzC,EAAiDC,UAAjD,EAA6DC,SAA7D,EAAwE;AAC1E,KAAIC,OAAO,EAAX;;AAEA,UAASC,aAAT,GAAyB;AACxBJ,SAAOK,EAAP,CAAU,cAAV,EAA0B,YAAY;AACrCN,WAAQO,MAAR;AACA,GAFD;AAGAP,UAAQM,EAAR,CAAW,yBAAX,EAAsC,YAAY;AACjDJ,cAAWM,KAAX;AACA,GAFD;;AAIAR,UAAQM,EAAR,CAAW,wBAAX,EAAqC,YAAY;AAChDH,aAAUK,KAAV;AACA,GAFD;;AAIAL,YAAUG,EAAV,CAAa,QAAb,EAAuB,UAAUG,MAAV,EAAkB;AACxCZ,cAAWa,IAAX,CAAiBC,KAAKC,SAAL,CAAeH,MAAf,CAAjB,EAAyC,UAAUI,CAAV,EAAa;AACrD,QAAIC,OAAOH,KAAKI,KAAL,CAAWF,EAAEC,IAAb,CAAX;AACA,QAAIE,KAAJ,EAAW;AAAEC,aAAQC,GAAR,CAAYJ,IAAZ;AAAmB;AAChCf,QAAIoB,IAAJ,CAASL,IAAT;AACA,IAJD;AAKA,GAND;AAOA;AACD,UAASM,WAAT,GAAuB;AACtBvB,aAAWwB,IAAX,CAAgBxB,WAAWa,IAA3B,EAAiC,CAChCC,KAAKC,SAAL,CAAe,EAAC,UAAU,aAAX,EAAf,CADgC,EAEhC,UAAUC,CAAV,EAAa;AACZ,OAAIC,OAAOH,KAAKI,KAAL,CAAWF,EAAEC,IAAb,CAAX;AACA,OAAIE,KAAJ,EAAW;AAAEC,YAAQC,GAAR,CAAYJ,IAAZ;AAAmB;AAChCf,OAAIoB,IAAJ,CAASL,IAAT;AACA,GAN+B,CAAjC;AAQA;AACA;AACD,UAASQ,OAAT,GAAmB;AAClBxB,MAAIuB,IAAJ;AACAtB,MAAIsB,IAAJ,CAAS,QAAT,EAAmB,gBAAnB;AACArB,UAAQqB,IAAR;AACApB,SAAOoB,IAAP;AACAnB,aAAWmB,IAAX;AACAlB,YAAUkB,IAAV;AACAhB;AAIA;AACDD,MAAKgB,WAAL,GAAmBA,WAAnB;AACAhB,MAAKkB,OAAL,GAAeA,OAAf;;AAEA,QAAOlB,IAAP;AACA,CA5DD","file":"mediator.js","sourcesContent":["define([\r\n//\t\"core/whb\",\r\n\t\"./mainSocket\",\r\n\t\"core/wuk\",\r\n\t\"map/mediator\",\r\n\t\"./sidebar\",\r\n\t\"./header\",\r\n\t\"./traceroute\",\r\n\t\"./discovery/mediator\",\r\n\t\"./templates\"\r\n], function (mainSocket, wuk, map, sidebar, header, traceroute, discovery) {\r\n\tvar inst = {};\r\n\t\r\n\tfunction addCustomEvts() {\r\n\t\theader.on(\"menu_clicked\", function () {\r\n\t\t\tsidebar.toggle();\r\n\t\t});\r\n\t\tsidebar.on(\"traceroute_item_clicked\", function () {\r\n\t\t\ttraceroute.begin();\r\n\t\t});\r\n\t\t\r\n\t\tsidebar.on(\"discovery_item_clicked\", function () {\r\n\t\t\tdiscovery.begin();\r\n\t\t});\r\n\t\t\r\n\t\tdiscovery.on(\"submit\", function (toSend) {\r\n\t\t\tmainSocket.send( JSON.stringify(toSend), function (e) {\r\n\t\t\t\tlet data = JSON.parse(e.data);\r\n\t\t\t\tif (DEBUG) { console.log(data) }\r\n\t\t\t\tmap.draw(data);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tfunction beforeReady() {\r\n\t\tmainSocket.init(mainSocket.send, [\r\n\t\t\tJSON.stringify({\"action\": \"getAllNodes\"}),\r\n\t\t\tfunction (e) {\r\n\t\t\t\tlet data = JSON.parse(e.data);\r\n\t\t\t\tif (DEBUG) { console.log(data) }\r\n\t\t\t\tmap.draw(data);\r\n\t\t\t}\r\n\t\t]);\r\n\t\t// whb.compileAll();\r\n\t}\r\n\tfunction onReady() {\r\n\t\twuk.init();\r\n\t\tmap.init(\"visMap\", \"#map_container\");\r\n\t\tsidebar.init();\r\n\t\theader.init();\r\n\t\ttraceroute.init();\r\n\t\tdiscovery.init();\r\n\t\taddCustomEvts();\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\tinst.beforeReady = beforeReady;\r\n\tinst.onReady = onReady;\r\n\t\r\n\treturn inst;\r\n});"]}