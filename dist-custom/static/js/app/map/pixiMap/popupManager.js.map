{"version":3,"sources":["../../../../../src/js/app/map/pixiMap/popupManager.js"],"names":["define","wpix","u","whb","activeBox","cbX","min","max","cbY","on","e","pos","el","activeOne","d","data","css","create","removeAll","div","Handlebars","templates","bubble","left","top","$","append","x","mainContainer","position","y","height","hideActive","hasClass","addClass","showActive","removeClass","empty"],"mappings":"AAAAA,OAAO,CAAC,QAAD,EAAW,WAAX,EAAwB,UAAxB,CAAP,EAA4C,UAAUC,IAAV,EAAgBC,CAAhB,EAAmBC,GAAnB,EAAwB;AACnE,KAAIC,SAAJ;AAAA,KACCC,MAAM;AACLC,OAAK,CADA;AAELC,OAAK;AAFA,EADP;AAAA,KAKCC,MAAM;AACLF,OAAK,CADA;AAELC,OAAK;AAFA,EALP;AASAN,MAAKQ,EAAL,CAAQ,MAAR,EAAgB,UAAUC,CAAV,EAAa;;AAE5B,MAAIC,MAAMD,EAAEC,GAAZ;AAAA,MACCC,KAAKC,WADN;AAAA,MAECC,IAAIF,GAAGG,IAAH,EAFL;;AAKA,MAAIH,EAAJ,EAAQ;AACPA,MAAGI,GAAH,CAAO;AACN;;AADM,IAAP;AAIA;AAED,EAdD;AAeA,UAASC,MAAT,CAAgBF,IAAhB,EAAsBJ,GAAtB,EAA2B;AAC1BO;AACD;AACC,MAAIC,MAAMC,WAAWC,SAAX,CAAqBC,MAArB,CAA4BP,IAA5B,CAAV;AAAA,MACCQ,IADD;AAAA,MACOC,GADP;;AAGAL,QAAMM,EAAEN,GAAF,CAAN;AACAM,IAAE,SAAF,EAAaC,MAAb,CAAoBP,GAApB;;AAEA,MAAIR,GAAJ,EAAS;AACRQ,OAAIH,GAAJ,CAAQ;AACPO,UAAM,CADC;AAEPC,SAAK;AAFE,IAAR;AAIAD,UAAQZ,IAAIgB,CAAJ,GAAQ,EAAT,GAAgB1B,KAAK2B,aAAL,CAAmBC,QAAnB,CAA4BF,CAA5C,GAAgD,IAAvD;AACAH,SAAOb,IAAImB,CAAJ,IAASX,IAAIY,MAAJ,KAAe,EAAxB,CAAD,GAAgC9B,KAAK2B,aAAL,CAAmBC,QAAnB,CAA4BC,CAA5D,GAAgE,IAAtE;;AAEAX,OAAIJ,IAAJ,CAAS;AACRQ,UAAMA,IADE;AAERC,SAAKA;AAFG,IAAT;;AAKAL,OAAIH,GAAJ,CAAQ;AACPO,UAAMA,IADC;AAEPC,SAAKA;AAFE,IAAR;AAIA;;AAED;AACA;AACD,UAASX,SAAT,GAAqB;AACpB,SAAOY,EAAE,mBAAF,CAAP;AACA;AACD,UAASO,UAAT,GAAsB;AACrB,MAAIpB,KAAKC,WAAT;AACA,MAAK,CAACD,GAAGqB,QAAH,CAAY,YAAZ,CAAN,EAAkC;AACjCrB,MAAGsB,QAAH,CAAY,YAAZ;AACA;AACD;AACD,UAASC,UAAT,GAAsB;AACrB,MAAIvB,KAAKC,WAAT;AACA,MAAKD,GAAGqB,QAAH,CAAY,YAAZ,CAAL,EAAiC;AAChCrB,MAAGwB,WAAH,CAAe,YAAf;AACA;AACD;AACD,UAASlB,SAAT,GAAqB;AACpBO,IAAE,SAAF,EAAaY,KAAb;AACA;;AAED,QAAO;AACN,MAAIjC,SAAJ,GAAgB;AAAE,UAAOS,WAAP;AAAqB,GADjC;AAENK,aAAWA,SAFL;AAGND,UAAQA,MAHF;AAINe,cAAYA,UAJN;AAKNG,cAAYA;AALN,EAAP;AASA,CAnFD","file":"popupManager.js","sourcesContent":["define(['./wpix', 'core/util', 'core/whb'], function (wpix, u, whb) {\r\n\tvar activeBox,\r\n\t\tcbX = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t},\r\n\t\tcbY = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t};\r\n\twpix.on(\"zoom\", function (e) {\r\n\t\t\r\n\t\tvar pos = e.pos,\r\n\t\t\tel = activeOne(),\r\n\t\t\td = el.data();\r\n\t\t\r\n\t\t\r\n\t\tif (el) {\r\n\t\t\tel.css({\r\n\t\t\t\t/* left: (orgPos.x - 40)  + pos.x + 'px',\r\n\t\t\t\ttop: (orgPos.y - (el.height() + 40)) + pos.y + 'px' */\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t});\r\n\tfunction create(data, pos) {\r\n\t\tremoveAll();\r\n\t//\tvar div = whb.tmpl.bubble(data),\r\n\t\tvar div = Handlebars.templates.bubble(data),\r\n\t\t\tleft, top;\r\n\t\t\r\n\t\tdiv = $(div);\r\n\t\t$('#popups').append(div);\r\n\t\t\r\n\t\tif (pos) {\r\n\t\t\tdiv.css({\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0\r\n\t\t\t});\r\n\t\t\tleft = (pos.x - 40)  + wpix.mainContainer.position.x + 'px';\r\n\t\t\ttop = (pos.y - (div.height() + 40)) + wpix.mainContainer.position.y + 'px';\r\n\t\t\t\r\n\t\t\tdiv.data({\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdiv.css({\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// console.log(div.css('top'), div.css('left'));\r\n\t}\r\n\tfunction activeOne() {\r\n\t\treturn $('#popups > .bubble');\r\n\t}\r\n\tfunction hideActive() {\r\n\t\tvar el = activeOne();\r\n\t\tif ( !el.hasClass('no-display') ) {\r\n\t\t\tel.addClass('no-display');\r\n\t\t}\r\n\t}\r\n\tfunction showActive() {\r\n\t\tvar el = activeOne();\r\n\t\tif ( el.hasClass('no-display') ) {\r\n\t\t\tel.removeClass('no-display');\r\n\t\t}\r\n\t}\r\n\tfunction removeAll() {\r\n\t\t$('#popups').empty();\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tget activeBox() { return activeOne(); },\r\n\t\tremoveAll: removeAll,\r\n\t\tcreate: create,\r\n\t\thideActive: hideActive,\r\n\t\tshowActive: showActive\r\n\t};\r\n\r\n\t\r\n});"]}