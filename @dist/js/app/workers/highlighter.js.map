{"version":3,"sources":["../../../../src/js/app/workers/highlighter.js"],"names":["highlightActive","GRAYED_OUT_COLOR","self","onmessage","e","d","data","len","targetId","nodes","edges","connectedNodes","connectedEdges","i","keys","node","edge","toUpdateNodes","toUpdateEdges","Object","length","hiddenLabel","color","undefined","label","originalColor","push","postMessage"],"mappings":"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","file":"highlighter.js","sourcesContent":["var highlightActive = false;\r\nvar GRAYED_OUT_COLOR = \"rgba(200, 200, 200, 0.5)\"; // \"rgba(150, 150, 150, 0.75)\"\r\n\r\nself.onmessage = function (e) {\r\n\tvar d = e.data,\r\n\t\tlen = d.len,\r\n\t\ttargetId = d.targetId,\r\n\t\tnodes = d.nodes,\r\n\t\tedges = d.edges,\r\n\t\tconnectedNodes = d.connectedNodes,\r\n\t\tconnectedEdges = d.connectedEdges,\r\n\t\ti, keys, len, node, edge,\r\n\t\ttoUpdateNodes = [],\r\n\t\ttoUpdateEdges = [];\r\n\t\r\n\tif (len > 0) {\r\n\t\thighlightActive = true;\r\n\t\t\r\n\t\tkeys = Object.keys(nodes);\r\n\t\tlen = keys.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tnode = nodes[ keys[i] ];\r\n\t\t\thiddenLabel = node.hiddenLabel;\r\n\t\t\t\r\n\t\t\tnode.color = GRAYED_OUT_COLOR;\r\n\t\t\tif (hiddenLabel === undefined) {\r\n\t\t\t\tnode.hiddenLabel = node.label;\r\n\t\t\t\tnode.label = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tlen = connectedNodes.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tnode = nodes[ connectedNodes[i] ];\r\n\t\t\thiddenLabel = node.hiddenLabel;\r\n\t\t\t\r\n\t\t\tnode.color = undefined;\r\n\t\t\tif (hiddenLabel !== undefined) {\r\n\t\t\t\tnode.label = hiddenLabel;\r\n\t\t\t\tnode.hiddenLabel = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tnode = nodes[targetId];\r\n\t\thiddenLabel = node.hiddenLabel;\r\n\t\tnode.color = undefined;\r\n\t\tif (hiddenLabel !== undefined) {\r\n\t\t\tnode.label = hiddenLabel;\r\n\t\t\tnode.hiddenLabel = undefined;\r\n\t\t}\r\n\t\t\r\n\t\tkeys = Object.keys(edges);\r\n\t\tlen = keys.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tedge = edges[ keys[i] ];\r\n\t\t\toriginalColor = edge.originalColor;\r\n\t\t\tif (originalColor === undefined) {\r\n\t\t\t\tedge.originalColor = edge.color;\r\n\t\t\t\tedge.color = GRAYED_OUT_COLOR;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tlen = connectedEdges.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tedge = edges[ connectedEdges[i] ];\r\n\t\t\toriginalColor = edge.originalColor;\r\n\t\t\tif (originalColor !== undefined) {\r\n\t\t\t\tedge.color = originalColor;\r\n\t\t\t\tedge.originalColor = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t} else if (highlightActive === true) {\r\n\t\tkeys = Object.keys(nodes);\r\n\t\tlen = keys.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tnode = nodes[ keys[i] ];\r\n\t\t\thiddenLabel = node.hiddenLabel;\r\n\t\t\t\r\n\t\t\tnode.color = undefined;\r\n\t\t\tif (hiddenLabel !== undefined) {\r\n\t\t\t\tnode.label = hiddenLabel;\r\n\t\t\t\tnode.hiddenLabel = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tkeys = Object.keys(edges);\r\n\t\tlen = keys.length;\r\n\t\tfor (i=0; i<len; i+=1) {\r\n\t\t\tedge = edges[ keys[i] ];\r\n\t\t\toriginalColor = edge.originalColor;\r\n\t\t\tif (originalColor !== undefined) {\r\n\t\t\t\tedge.color = originalColor;\r\n\t\t\t\tedge.originalColor = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\thighlightActive = false\r\n\t}\r\n\t\r\n\tkeys = Object.keys(nodes);\r\n\tlen = keys.length;\r\n\tfor (i=0; i<len; i+=1) {\r\n\t\ttoUpdateNodes.push( nodes[ keys[i] ] );\r\n\t}\r\n\t\r\n\tkeys = Object.keys(edges);\r\n\tlen = keys.length;\r\n\tfor (i=0; i<len; i+=1) {\r\n\t\ttoUpdateEdges.push( edges[ keys[i] ] );\r\n\t}\r\n\t\r\n\t\r\n\tself.postMessage({\r\n\t\tnodes: toUpdateNodes,\r\n\t\tedges: toUpdateEdges\r\n\t});\r\n}"]}