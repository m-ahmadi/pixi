{"version":3,"sources":["../src/page.js"],"names":["define","map","wuk","whb","discovery","traceroute","mockTrace","inst","doValidation","inputEl","el","val","res","startBtn","$","isValidIp","removeClass","addClass","enable","disable","addEvt","fn","par","apply","undefined","compileAll","sidebar","css","height","window","innerHeight","on","width","innerWidth","e","preventDefault","clear","closed","sb","is","toggle","txtarea","checkbox","txt","arr","trim","split","trace","removeAttr","abort","first","second","type","discover","parseInt","value","parent","remove","document","keyCode","isAnyModalActive","modalState","target","id"],"mappings":"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","file":"page.js","sourcesContent":["define(['map/mediator', './wuk', './whb', './discovery', './traceroute', './mockTrace'], function (map, wuk, whb, discovery, traceroute, mockTrace) {\r\n\tvar inst = {};\r\n\t\r\n\tfunction doValidation(inputEl) {\r\n\t\tvar el = inputEl,\r\n\t\t\tval = el.val(),\r\n\t\t\tres = false,\r\n\t\t\tstartBtn = $('#discovery_next');\r\n\t\t\r\n\t\tres = discovery.isValidIp(val);\r\n\t\t\r\n\t\tinputEl.removeClass('uk-form-success uk-form-danger');\r\n\t\tif (res) {\r\n\t\t\tel.addClass('uk-form-success');\r\n\t\t\twuk.enable( startBtn );\r\n\t\t} else {\r\n\t\t\tel.addClass('uk-form-danger');\r\n\t\t\twuk.disable( startBtn );\r\n\t\t}\r\n\t}\r\n\tfunction addEvt(fn, par) {\r\n\t\t/* typeof fn === 'function' ? fn('pixiMap', \"#map_container\") : undefined; */\r\n\t\tfn.apply(undefined, par);\r\n\t\twhb.compileAll();\r\n\t\t\r\n\t\tvar sidebar = $('#newSide');\r\n\t\t\r\n\t\tsidebar.css({height: window.innerHeight});\r\n\t\t$(window).on('resize', function () {\r\n\t\t\tvar width = window.innerWidth,\r\n\t\t\t\theight = window.innerHeight;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// map.resize(width, height);\r\n\t\t\t\r\n\t\t\tsidebar.css({height: height});\r\n\t\t});\r\n\t\t// $('#newSide').toggle('slide');\r\n\t\tdoValidation( $('#disc_left_input') );\r\n\t\tdoValidation( $('#disc_right_input') );\r\n\t\t$('#clear').on('click', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t//\twpix.clearContainer('viewport');\r\n\t\t\tmap.clear();\r\n\t\t});\r\n\t\t$('#sidebar_btn').on('click', function () {\r\n\t\t\tthis.closed = this.closed ? false : true;\r\n\t\t\tvar sb = $('#newSide');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (  !sb.is(':animated')  ) {\r\n\t\t\t\tsb.toggle('slide');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// if (this.closed) {\r\n\t\t\t\t// sb.toggleClass('uk-animation-slide-left');\r\n\t\t\t\t// sb.toggleClass('no-display');\r\n\t\t\t// } else {\r\n\t\t\t\t// sb.addClass('uk-animation-reverse');\r\n\t\t\t\t\r\n\t\t\t// }\r\n\t\t});\r\n\t\t$('#traceroute_scan').on('click', function (e) {\r\n\t\t\tvar txtarea, checkbox, txt, arr;\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\ttxtarea = $('#txtarea_thing');\r\n\t\t\tcheckbox = $('input[type=\"checkbox\"][name=\"secure\"]').is(':checked');\r\n\t\t\t\r\n\t\t\ttxt = txtarea.val().trim();\r\n\t\t\tif (txt) {\r\n\t\t\t\tarr = txt.split(\"\\n\");\r\n\t\t\t\t//console.log(arr, checkbox);\r\n\t\t\t\t\r\n\t\t\t\ttraceroute.trace(arr, checkbox);\r\n\t\t\t//\tmockTrace.trace();\r\n\t\t\t}\r\n\t\t\t$('#abort').removeAttr('disabled');\r\n\t\t});\r\n\t\t$('#abort').on('click', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\ttraceroute.abort();\r\n\t\t});\r\n\t\t$('#discovery_next').on('click', function () {\r\n\t\t\tvar first, second, type;\r\n\t\t\t\r\n\t\t\tfirst = $('input[type=\"text\"][name=\"first-input\"]').val();\r\n\t\t\tsecond = $('input[type=\"text\"][name=\"second-input\"]').val();\r\n\t\t\t\r\n\t\t\tfirst = first ? first.trim() : '';\r\n\t\t\tsecond = second ? second.trim() : '';\r\n\t\t\t\r\n\t\t\ttype = $('#modal-discovery input[type=\"radio\"][name=\"radio1\"]:checked').val();\r\n\t\t\tdiscovery.discover( first, second, parseInt(type, 10) );\r\n\t\t\t\r\n\t\t});\r\n\t\t$('.j-discovery-radios').on('click', function () {\r\n\t\t\tvar val = parseInt(this.value, 10),\r\n\t\t\t\tfirst, second;\r\n\t\t\t\t\r\n\t\t\tfirst = $('input[type=\"text\"][name=\"first-input\"]');\r\n\t\t\tsecond = $('input[type=\"text\"][name=\"second-input\"]');\r\n\t\t\t\r\n\t\t\tif (!val) {\r\n\t\t\t\tfirst.val('192.168.1.1');\r\n\t\t\t\tsecond.val('192.168.1.255');\r\n\t\t\t} else {\r\n\t\t\t\tfirst.val('192.168.1.1');\r\n\t\t\t\tsecond.val('255.255.255.0');\r\n\t\t\t}\r\n\t\t\tdoValidation( $('#disc_left_input') );\r\n\t\t\tdoValidation( $('#disc_right_input') );\r\n\t\t});\r\n\t\t$('#disc_left_input').on('keyup', function () {\r\n\t\t\tdoValidation( $(this) );\r\n\t\t});\r\n\t\t$('#disc_right_input').on('keyup', function () {\r\n\t\t\tdoValidation( $(this) );\r\n\t\t});\r\n\t\t$('#popups').on('click', '.j-popup-close', function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).parent().remove();\r\n\t\t});\r\n\t\t$(document).on('keydown', function (e) {\r\n\t\t\tvar sb;\r\n\t\t\tif (e.keyCode === 27) {\r\n\t\t\t\tif ( !wuk.isAnyModalActive() ) {\r\n\t\t\t\t\tsb = $('#newSide');\r\n\t\t\t\t\tif ( !sb.is(':animated') ) {\r\n\t\t\t\t\t\tsb.toggle('slide');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t/* $('a[href^=\"#modal_\"]').on('click', function (e) {\r\n\t\t\twuk.modalState(true, e.target.hash.substr(1));\r\n\t\t}); */\r\n\t\t$('div[id^=\"modal_\"]').on('beforeshow', function (e) {\r\n\t\t\twuk.modalState(true, e.target.id);\r\n\t\t});\r\n\t\t$('div[id^=\"modal_\"]').on('hide', function (e) {\r\n\t\t\twuk.modalState(false, e.target.id);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\tinst.addEvt = addEvt;\r\n\treturn inst;\r\n});\r\n\r\n//var background = new PIXI.Container();\r\n//var tink = new Tink(PIXI, renderer.view);\r\n\r\n// var tween = new TWEEN.Tween( graphics.position );\r\n// tween.to( {x: 500}, 1000);\r\n// tween.start();"]}