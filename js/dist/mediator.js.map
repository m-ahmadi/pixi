{"version":3,"sources":["../src/mediator.js"],"names":["define","mainSocket","wuk","map","sidebar","traceroute","discovery","inst","addCustomEvts","on","begin","toSend","send","JSON","stringify","e","data","parse","DEBUG","console","log","draw","beforeReady","init","onReady"],"mappings":"AAAAA,OAAO;AACP;AACC,cAFM,EAGN,UAHM,EAIN,cAJM,EAKN,WALM,EAMN,cANM,EAON,sBAPM,EAQN,aARM,CAAP,EASG,UAAUC,UAAV,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,OAAhC,EAAyCC,UAAzC,EAAqDC,SAArD,EAAgE;AAClE,KAAIC,OAAO,EAAX;;AAEA,UAASC,aAAT,GAAyB;AACxBJ,UAAQK,EAAR,CAAW,yBAAX,EAAsC,YAAY;AACjDJ,cAAWK,KAAX;AACA,GAFD;;AAIAN,UAAQK,EAAR,CAAW,wBAAX,EAAqC,YAAY;AAChDH,aAAUI,KAAV;AACA,GAFD;;AAIAJ,YAAUG,EAAV,CAAa,QAAb,EAAuB,UAAUE,MAAV,EAAkB;AACxCV,cAAWW,IAAX,CAAiBC,KAAKC,SAAL,CAAeH,MAAf,CAAjB,EAAyC,UAAUI,CAAV,EAAa;AACrD,QAAIC,OAAOH,KAAKI,KAAL,CAAWF,EAAEC,IAAb,CAAX;AACA,QAAIE,KAAJ,EAAW;AAAEC,aAAQC,GAAR,CAAYJ,IAAZ;AAAmB;AAChCb,QAAIkB,IAAJ,CAASL,IAAT;AACA,IAJD;AAKA,GAND;AAOA;AACD,UAASM,WAAT,GAAuB;AACtBrB,aAAWsB,IAAX,CAAgBtB,WAAWW,IAA3B,EAAiC,CAChCC,KAAKC,SAAL,CAAe,EAAC,UAAU,aAAX,EAAf,CADgC,EAEhC,UAAUC,CAAV,EAAa;AACZ,OAAIC,OAAOH,KAAKI,KAAL,CAAWF,EAAEC,IAAb,CAAX;AACA,OAAIE,KAAJ,EAAW;AAAEC,YAAQC,GAAR,CAAYJ,IAAZ;AAAmB;AAChCb,OAAIkB,IAAJ,CAASL,IAAT;AACA,GAN+B,CAAjC;AAQA;AACA;AACD,UAASQ,OAAT,GAAmB;AAClBtB,MAAIqB,IAAJ;AACApB,MAAIoB,IAAJ,CAAS,QAAT,EAAmB,gBAAnB;AACAnB,UAAQmB,IAAR;AACAlB,aAAWkB,IAAX;AACAjB,YAAUiB,IAAV;AACAf;AAIA;AACDD,MAAKe,WAAL,GAAmBA,WAAnB;AACAf,MAAKiB,OAAL,GAAeA,OAAf;;AAEA,QAAOjB,IAAP;AACA,CAvDD","file":"mediator.js","sourcesContent":["define([\r\n//\t\"core/whb\",\r\n\t\"./mainSocket\",\r\n\t\"core/wuk\",\r\n\t\"map/mediator\",\r\n\t\"./sidebar\",\r\n\t\"./traceroute\",\r\n\t\"./discovery/mediator\",\r\n\t\"./templates\"\r\n], function (mainSocket, wuk, map, sidebar, traceroute, discovery) {\r\n\tvar inst = {};\r\n\t\r\n\tfunction addCustomEvts() {\r\n\t\tsidebar.on(\"traceroute_item_clicked\", function () {\r\n\t\t\ttraceroute.begin();\r\n\t\t});\r\n\t\t\r\n\t\tsidebar.on(\"discovery_item_clicked\", function () {\r\n\t\t\tdiscovery.begin();\r\n\t\t});\r\n\t\t\r\n\t\tdiscovery.on(\"submit\", function (toSend) {\r\n\t\t\tmainSocket.send( JSON.stringify(toSend), function (e) {\r\n\t\t\t\tlet data = JSON.parse(e.data);\r\n\t\t\t\tif (DEBUG) { console.log(data) }\r\n\t\t\t\tmap.draw(data);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tfunction beforeReady() {\r\n\t\tmainSocket.init(mainSocket.send, [\r\n\t\t\tJSON.stringify({\"action\": \"getAllNodes\"}),\r\n\t\t\tfunction (e) {\r\n\t\t\t\tlet data = JSON.parse(e.data);\r\n\t\t\t\tif (DEBUG) { console.log(data) }\r\n\t\t\t\tmap.draw(data);\r\n\t\t\t}\r\n\t\t]);\r\n\t\t// whb.compileAll();\r\n\t}\r\n\tfunction onReady() {\r\n\t\twuk.init();\r\n\t\tmap.init(\"visMap\", \"#map_container\");\r\n\t\tsidebar.init();\r\n\t\ttraceroute.init();\r\n\t\tdiscovery.init();\r\n\t\taddCustomEvts();\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\tinst.beforeReady = beforeReady;\r\n\tinst.onReady = onReady;\r\n\t\r\n\treturn inst;\r\n});"]}