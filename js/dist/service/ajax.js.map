{"version":3,"sources":["../../src/service/ajax.js"],"names":["define","$","support","cors","ajaxSetup","crossDomain","fns","counter","xhr","done","fail","always","u","execute","type","uid","a","b","c","o","f","ajax","id","url","dataType","data","beforeSend","txt","obj","err","fn","callbacks"],"mappings":"AAAAA,OAAO,YAAY;;AAElBC,GAAEC,OAAF,CAAUC,IAAV,GAAiB,IAAjB;;AAEAF,GAAEG,SAAF,CAAY;AACXC,eAAa;AADF,EAAZ;;AAIA,KAAIC,MAAM,EAAV;AAAA,KACCC,UAAU,CADX;AAAA,KAECC,GAFD;;AAIAF,KAAIG,IAAJ,GAAW,EAAX;AACAH,KAAII,IAAJ,GAAW,EAAX;AACAJ,KAAIK,MAAJ,GAAa,EAAb;;AAEA,UAASC,CAAT,GAAa;AACZ,SAAO,OAAKL,WAAS,CAAd,CAAP;AACA;AACD,UAASM,OAAT,CAAiBC,IAAjB,EAAuBC,GAAvB,EAA4BC,CAA5B,EAA+BC,CAA/B,EAAkCC,CAAlC,EAAqC;AACpC,MAAIC,IAAIb,IAAIQ,IAAJ,CAAR;AAAA,MACCM,IAAID,EAAEJ,GAAF,CADL;AAEA,MAAI,OAAOK,CAAP,KAAa,UAAjB,EAA6B;AAC5BA,KAAEJ,CAAF,EAAKC,CAAL,EAAQC,CAAR;AACA;AACD;AACD,UAASG,IAAT,CAAcF,CAAd,EAAiB;AAChBA,MAAIA,IAAIA,CAAJ,GAAQ,EAAZ;;AAEA,MAAIJ,MAAMH,GAAV;;AAEAS,OAAKC,EAAL,GAAUP,GAAV;;AAGAP,QAAMP,EAAEoB,IAAF,CAAO;AACZE,QAAKJ,EAAEI,GAAF,IAAS,uBADF;AAEZT,SAAMK,EAAEL,IAAF,IAAU,KAFJ;AAGZU,aAAUL,EAAEK,QAAF,IAAc,MAHZ;AAIZC,SAAMN,EAAEM,IAJI;AAKZC,eAAYP,EAAEO,UALF;AAMZJ,OAAIP;AANQ,GAAP,EAQLN,IARK,CAQA,UAAUgB,IAAV,EAAgBE,GAAhB,EAAqBC,GAArB,EAA0B;;AAE/B,OAAI,KAAKN,EAAL,KAAYD,KAAKC,EAArB,EAAyB;AACxBT,YAAQ,MAAR,EAAgBE,GAAhB,EAAqBU,IAArB,EAA2BE,GAA3B,EAAgCC,GAAhC;AACA;AACD,GAbK,EAcLlB,IAdK,CAcA,UAAUkB,GAAV,EAAeD,GAAf,EAAoBE,GAApB,EAAyB;;AAE9BhB,WAAQ,MAAR,EAAgBE,GAAhB,EAAqBa,GAArB,EAA0BD,GAA1B,EAA+BE,GAA/B;AAEA,GAlBK,EAmBLlB,MAnBK,CAmBE,UAAUiB,GAAV,EAAeD,GAAf,EAAoB;;AAE3Bd,WAAQ,QAAR,EAAkBE,GAAlB,EAAuBa,GAAvB,EAA4BD,GAA5B;AAEA,GAvBK,CAAN;;AAyBAN,OAAKb,GAAL,GAAWA,GAAX;;AAEA,SAAOa,IAAP;AACA;;AAEDA,MAAKZ,IAAL,GAAY,UAAUqB,EAAV,EAAc;AACzBxB,MAAIG,IAAJ,CAAS,KAAKa,EAAd,IAAoBQ,EAApB;AACA,SAAO,IAAP;AACA,EAHD;AAIAT,MAAKX,IAAL,GAAY,UAAUoB,EAAV,EAAc;AACzBxB,MAAII,IAAJ,CAAS,KAAKY,EAAd,IAAoBQ,EAApB;AACA,SAAO,IAAP;AACA,EAHD;AAIAT,MAAKV,MAAL,GAAc,UAAUmB,EAAV,EAAc;AAC3BxB,MAAIK,MAAJ,CAAW,KAAKW,EAAhB,IAAsBQ,EAAtB;AACA,SAAO,IAAP;AACA,EAHD;AAIAT,MAAKU,SAAL,GAAiBzB,GAAjB;;AAEA,QAAOe,IAAP;AAEA,CAhFD","file":"ajax.js","sourcesContent":["define(function () {\r\n\t\r\n\t$.support.cors = true;\r\n\r\n\t$.ajaxSetup({\r\n\t\tcrossDomain: true\r\n\t});\r\n\r\n\tvar fns = {},\r\n\t\tcounter = 0,\r\n\t\txhr;\r\n\t\r\n\tfns.done = {};\r\n\tfns.fail = {};\r\n\tfns.always = {};\r\n\t\r\n\tfunction u() {\r\n\t\treturn 'a'+(counter+=1);\r\n\t}\r\n\tfunction execute(type, uid, a, b, c) {\r\n\t\tvar o = fns[type],\r\n\t\t\tf = o[uid];\r\n\t\tif (typeof f === 'function') {\r\n\t\t\tf(a, b, c);\r\n\t\t}\r\n\t}\r\n\tfunction ajax(o) {\r\n\t\to = o ? o : {};\r\n\t\t\r\n\t\tvar uid = u();\r\n\t\t\r\n\t\tajax.id = uid;\r\n\t\t\r\n\t\t\r\n\t\txhr = $.ajax({\r\n\t\t\turl: o.url || 'http://localhost:3000',\r\n\t\t\ttype: o.type || 'GET',\r\n\t\t\tdataType: o.dataType || 'json',\r\n\t\t\tdata: o.data,\r\n\t\t\tbeforeSend: o.beforeSend,\r\n\t\t\tid: uid\r\n\t\t})\r\n\t\t.done(function (data, txt, obj) {\r\n\t\t\t\r\n\t\t\tif (this.id === ajax.id) {\r\n\t\t\t\texecute('done', uid, data, txt, obj);\r\n\t\t\t};\r\n\t\t})\r\n\t\t.fail(function (obj, txt, err) {\r\n\t\t\t\r\n\t\t\texecute('fail', uid, obj, txt, err);\r\n\t\t\t\r\n\t\t})\r\n\t\t.always(function (obj, txt) {\r\n\t\t\t\r\n\t\t\texecute('always', uid, obj, txt);\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tajax.xhr = xhr;\r\n\t\t\r\n\t\treturn ajax;\r\n\t};\r\n\t\r\n\tajax.done = function (fn) {\r\n\t\tfns.done[this.id] = fn;\r\n\t\treturn this;\r\n\t};\r\n\tajax.fail = function (fn) {\r\n\t\tfns.fail[this.id] = fn;\r\n\t\treturn this;\r\n\t};\r\n\tajax.always = function (fn) {\r\n\t\tfns.always[this.id] = fn;\r\n\t\treturn this;\r\n\t};\r\n\tajax.callbacks = fns;\r\n\t\r\n\treturn ajax;\r\n\r\n});"]}