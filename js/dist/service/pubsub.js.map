{"version":3,"sources":["../../src/service/pubsub.js"],"names":["define","newPubSub","Error","subscribers","inst","getSubscribers","subscribe","evt","fn","par","events","add","str","push","indexOf","split","forEach","el","util","isObj","Object","keys","i","undefined","publish","evtName","evtData","on","emit"],"mappings":"AAAAA,OAAO,YAAY;;AAElB,UAASC,SAAT,GAAqB;AACpB;;AACA,MAAK,gBAAgBA,SAArB,EAAiC;AAAE,SAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AAAqD;;AAExF,MAAIC,cAAc,EAAlB;AAAA,MACCC,OAAO,EADR;;AAGAA,OAAKC,cAAL,GAAsB,YAAY;AACjC,UAAOF,WAAP;AACA,GAFD;;AAIAC,OAAKE,SAAL,GAAiB,UAAUC,GAAV,EAAeC,EAAf,EAAmBC,GAAnB,EAAwB;AACxC,OAAIC,MAAJ;AAAA,OACCC,MAAM,SAANA,GAAM,CAAUC,GAAV,EAAe;AACpB,QAAK,OAAOT,YAAYS,GAAZ,CAAP,KAA4B,WAAjC,EAA+C;AAC9CT,iBAAYS,GAAZ,IAAmB,EAAnB;AACA;AACDT,gBAAYS,GAAZ,EAAiBC,IAAjB,CAAsB;AACrBL,SAAIA,EADiB;AAErBC,UAAKA;AAFgB,KAAtB;AAIA,IATF;;AAWA,OAAI,OAAOF,GAAP,KAAe,QAAnB,EAA6B;AAC5B,QAAKA,IAAIO,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAA3B,EAA+B;AAC9BH,SAAIJ,GAAJ;AACA,KAFD,MAEO;AACNG,cAASH,IAAIQ,KAAJ,CAAU,GAAV,CAAT;AACAL,YAAOM,OAAP,CAAe,UAAUC,EAAV,EAAc;AAC5BN,UAAIM,EAAJ;AACA,MAFD;AAGA;AACD,IATD,MASO,IAAKC,KAAKC,KAAL,CAAWZ,GAAX,CAAL,EAAuB;AAC7Ba,WAAOC,IAAP,CAAYd,GAAZ,EAAiBS,OAAjB,CAAyB,UAAUM,CAAV,EAAa;AACrC,SAAI,OAAOnB,YAAYmB,CAAZ,CAAP,KAA0B,WAA9B,EAA2C;AAC1CnB,kBAAYmB,CAAZ,IAAiB,EAAjB;AACA;AACD,SAAK,OAAOf,IAAIe,CAAJ,CAAP,KAAkB,UAAvB,EAAoC;AACnCnB,kBAAYmB,CAAZ,EAAeT,IAAf,CAAoB;AACnBL,WAAID,IAAIe,CAAJ,CADe;AAEnBb,YAAKc;AAFc,OAApB;AAIA,MALD,MAKO,IAAKL,KAAKC,KAAL,CAAWZ,IAAIe,CAAJ,CAAX,CAAL,EAA0B;AAChCnB,kBAAYmB,CAAZ,EAAeT,IAAf,CAAoB;AACnBL,WAAID,IAAIe,CAAJ,EAAOd,EADQ;AAEnBC,YAAKF,IAAIe,CAAJ,EAAOb;AAFO,OAApB;AAIA;AACD,KAfD;AAgBA;AACD,GAvCD;;AAyCAL,OAAKoB,OAAL,GAAe,UAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AAC1C,OAAI,OAAOvB,YAAYsB,OAAZ,CAAP,KAAgC,WAApC,EAAiD;AAChDtB,gBAAYsB,OAAZ,EAAqBT,OAArB,CAA6B,UAAUM,CAAV,EAAa;AACzCA,OAAEd,EAAF,CAAKkB,OAAL,EAAcJ,EAAEb,GAAhB;AACA,KAFD;AAGA;AACD,GAND;;AAQAL,OAAKuB,EAAL,GAAU,UAAUpB,GAAV,EAAeC,EAAf,EAAmBC,GAAnB,EAAwB;AAAE;AACnC,QAAKH,SAAL,CAAeC,GAAf,EAAoBC,EAApB,EAAwBC,GAAxB;AACA,GAFD;;AAIAL,OAAKwB,IAAL,GAAY,UAAUH,OAAV,EAAmBC,OAAnB,EAA4B;AAAE;AACzC,QAAKF,OAAL,CAAaC,OAAb,EAAsBC,OAAtB;AACA,GAFD;;AAIA,SAAOtB,IAAP;AACA;;AAGD,QAAOH,SAAP;AAEA,CA5ED","file":"pubsub.js","sourcesContent":["define(function () {\r\n\t\r\n\tfunction newPubSub() {\r\n\t\t\"use strict\";\r\n\t\tif ( this instanceof newPubSub ) { throw new Error('newPubSub() was called with new'); }\r\n\t\t\r\n\t\tvar subscribers = {},\r\n\t\t\tinst = {};\r\n\t\t\r\n\t\tinst.getSubscribers = function () {\r\n\t\t\treturn subscribers;\r\n\t\t};\r\n\t\t\r\n\t\tinst.subscribe = function (evt, fn, par) {\r\n\t\t\tvar events,\r\n\t\t\t\tadd = function (str) {\r\n\t\t\t\t\tif ( typeof subscribers[str] === 'undefined' ) {\r\n\t\t\t\t\t\tsubscribers[str] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubscribers[str].push({\r\n\t\t\t\t\t\tfn: fn,\r\n\t\t\t\t\t\tpar: par\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\tif (typeof evt === 'string') {\r\n\t\t\t\tif ( evt.indexOf(' ') === -1 ) {\r\n\t\t\t\t\tadd(evt);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevents = evt.split(' ');\r\n\t\t\t\t\tevents.forEach(function (el) {\r\n\t\t\t\t\t\tadd(el);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if ( util.isObj(evt) ) {\r\n\t\t\t\tObject.keys(evt).forEach(function (i) {\r\n\t\t\t\t\tif (typeof subscribers[i] === 'undefined') {\r\n\t\t\t\t\t\tsubscribers[i] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( typeof evt[i] === 'function' ) {\r\n\t\t\t\t\t\tsubscribers[i].push({\r\n\t\t\t\t\t\t\tfn: evt[i],\r\n\t\t\t\t\t\t\tpar: undefined\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if ( util.isObj(evt[i]) ) {\r\n\t\t\t\t\t\tsubscribers[i].push({\r\n\t\t\t\t\t\t\tfn: evt[i].fn,\r\n\t\t\t\t\t\t\tpar: evt[i].par\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tinst.publish = function (evtName, evtData) {\r\n\t\t\tif (typeof subscribers[evtName] !== 'undefined') {\r\n\t\t\t\tsubscribers[evtName].forEach(function (i) {\r\n\t\t\t\t\ti.fn(evtData, i.par);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tinst.on = function (evt, fn, par) { // alias\r\n\t\t\tthis.subscribe(evt, fn, par);\r\n\t\t};\r\n\t\t\r\n\t\tinst.emit = function (evtName, evtData) { // alias\r\n\t\t\tthis.publish(evtName, evtData);\r\n\t\t};\r\n\t\t\r\n\t\treturn inst;\r\n\t};\r\n\t\r\n\t\r\n\treturn newPubSub;\r\n\r\n});"]}